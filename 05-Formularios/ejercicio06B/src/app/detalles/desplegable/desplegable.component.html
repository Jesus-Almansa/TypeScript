<form [formGroup]="form" (ngSubmit)="hacerSubmit()">
  <div>
    <label for="referencia">Seleccione un producto</label>
    <select id="referencia" formControlName="referencia" required>
      @for (p of lista; track p.referencia) {
        <option [value]="p.referencia">{{ p.nombre }}</option>
      }
    </select>
  </div>

  <div>
    <input type="submit" [value]="mensaje" [disabled]="form.invalid">
  </div>
</form>